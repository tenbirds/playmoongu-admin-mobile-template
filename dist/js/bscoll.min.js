"use strict";var _betterScroll=_interopRequireDefault(require("better-scroll"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}require("./main.less"),function(c){c.fn.selectScroll=function(e){this.settings=c.extend({},{title:"Pick An Option",data:[],cancelTxt:"cancel",cancelClass:"",confirmTxt:"confirm",confirmClass:"",cancel:null,confirm:null,selectedIndex:[0,0,0],class:""},e),this.settings.maxLevel=3<this.settings.data.length?3:0<this.settings.data.length?this.settings.data.length:1;var e=function(e){for(var t="",n=0;n<e;n++)t+='<div class="wheel">\n                                    <ul class="wheel-scroll">\n                                    </ul>\n                                </div>\n                                ';return t}.call(this,this.settings.maxLevel),t='<div class="picker">\n            <div class="picker-panel">\n                <div class="picker-choose border-bottom-1px">\n                    <span class="cancel">'+this.settings.cancelTxt+'</span>\n                    <span class="confirm">'+this.settings.confirmTxt+'</span>\n                    <h1 class="picker-title">'+this.settings.title+'</h1>\n                </div>\n                <div class="picker-content">\n                    <div class="mask-top border-bottom-1px"></div>\n                    <div class="mask-bottom border-top-1px"></div>\n                    <div class="wheel-wrapper">'+e+'</div>\n                </div>\n                <div class="picker-footer"></div>\n            </div>\n        </div>',l=this;l.$wheel=[],l.isEmpty=function(){return!l.settings.data.length},l.init=function(){if(l.next(".picker").length)l.show();else{l.after(t),""!=l.settings.class&&l.next(".picker").addClass(l.settings.class);for(var e=0;e<l.settings.maxLevel;e++)l._createWheel(e)}},l.confirm=function(e){var n,s=l.getData();l.hide(),l.bindSelectedIndex(),e.data.callback?e.data.callback(s):s.length<1||(n="",1===s.length?n=s[0].text:Object.keys(s).reduce(function(e,t){return n+=s[e].text+","+s[t].text,t}),l.html(n))},l.cancel=function(){console.log("点击了cancel"),l.hide()},l.show=function(){console.log("这里是show函数"),l.$picker=l.next(".picker"),l.$picker.show(),l.$picker.find(".picker-panel").attr("class","picker-panel").addClass("up")},l.hide=function(){var e;console.log("这里是hide"),l.$picker&&(l.$picker.find(".picker-panel").attr("class","picker-panel").addClass("down"),e=setTimeout(function(){l.$picker.hide(),clearTimeout(e)},300))},l.setData=function(){},l.getData=function(){var e=[];if(l.isEmpty())return[];for(var t=0;t<l.$wheel.length;t++)e.push(l.settings.data[t][l.$wheel[t].getSelectedIndex()]);return e},l.setSelectedIndex=function(e){l.bindSelectedIndex(e)},l.updateSelectedIndex=function(){console.log("这是updateSelectedIndex:");for(var e=l.settings.selectedIndex.length;e<l.settings.maxLevel;e++)l.settings.selectedIndex[e]=0;l.attr("data-selectindex")&&(l.settings.selectedIndex=l.attr("data-selectindex").split(","))},l.bindSelectedIndex=function(){for(var e=[],t=0;t<l.$wheel.length;t++)e.push(l.$wheel[t].getSelectedIndex());e.lenght&&l.attr("data-selectIndex",e)},l.detachButtonEvents=function(){console.log("这里是detachButtonEvents"),l.$confirm.unbind(),l.$cancel.unbind()},l.attachButtonEvents=function(){console.log("这里是attachButtonEvents"),l.$confirm=l.$picker.find(".confirm").addClass(l.settings.confirmClass),l.$confirm.bind("click",{callback:l.settings.confirm},l.confirm),l.$cancel=l.$picker.find(".cancel").addClass(l.settings.cancelClass),l.$cancel.bind("click",{callback:l.settings.cancel},l.cancel)},l.scrollTo=function(e){console.log("这是scrollTo"),l.$wheel[e].wheelTo(e)},l._createWheel=function(e){l._createHtml(e),l.updateSelectedIndex();var t=document.querySelectorAll(".wheel");l.$wheel[e]=new _betterScroll.default(t[e],{wheel:{selectedIndex:l.settings.selectedIndex[e],wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item"},probeType:3}),e===l.settings.maxLevel-1&&(console.log("运行了几次函数绑定"),l.show(),l.attachButtonEvents())},l._createHtml=function(e){for(var t="",n=this.settings.data.length?this.settings.data[e].length:0,s=0;s<n;s++)t+='<li class="wheel-item" data-id="'+this.settings.data[e][s].id+'">'+this.settings.data[e][s].text+"</li>";c(".wheel-scroll").eq(e).append(t)},l.init()}}(jQuery);
//# sourceMappingURL=bscoll.min.js.map
