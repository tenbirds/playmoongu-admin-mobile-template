<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>Gulp</title>
    <link rel="manifest" href="/manifest.json">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.min.css" /> -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" />

    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css" />
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <link rel="stylesheet" href="/css/style.min.css?v=2021071501" media="screen">

</head>
<body class="scan-barcode">


<style>
    #qr-reader{
        border: 0 !important;
    }
    #qr-reader__dashboard{
        display: none;
    }
    #qr-reader>div:nth-child(1){
        display: none;
    }
    #qr-shaded-region >div{
            background-color: rgb(251 212 3) !important;
        }
    
</style>
<main>
    <div class="main-scan-barcode">
        
        <div class="scan-barcode-head">

            <div class="main-scan-barcode-head">
                <img class="main-scan-barcode-head__close" src="/images/icons/icon_close_w.svg" />
                <h1 class="main-scan-barcode-head__title">바코드 상품 검색</h1>
            </div>
            
        </div>
        <div class="main-scan-barcode-camera">
            <div id="qr-reader" style="width:100%"></div>
            
            <div class="main-scan-barcode-camera__note">
                <label class="main-scan-barcode-camera__note__text">바코드를 촬영해 주세요.</label>
            </div>
        </div>
        <div class="main-scan-barcode-button">
            <div class="main-barcode-button" id="startActionBtn" onclick="startScan()">
                <img class="main-barcode-button__camera" src="/images/icons/icon_camera.svg" />
            </div>
        </div>
        
    </div>
</main>






<footer></footer>

<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.min.js" integrity="sha512-a6ctI6w1kg3J4dSjknHj3aWLEbjitAXAjLDRUxo2wyYmDFRcz2RJuQr5M3Kt8O/TtUSp8n2rAyaXYy1sjoKmrQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>-->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js "
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous "></script>
        <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script> -->

<script src="/js/polyfill.js"></script>

<script src="https://unpkg.com/swiper/swiper-bundle.js"></script>
<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script src="https://cdn.amcharts.com/lib/4/core.js"></script>
<script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
<script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

<link rel="stylesheet" href="/css/bscroll.min.css">
<script src="https://unpkg.com/better-scroll@latest/dist/better-scroll.min.js"></script>
<script type="text/javascript" src="/js/jquery.selectscroll.min.js"></script>

<script src="/js/script.min.js?v=2021070601"></script>

<script src="/js/html5-qrcode.min.js"></script>
<script>
    function startScan(){
        let cameras = $('#qr-reader__camera_selection > option').map(function(k, item){
            return $(item).attr('value')
        });
        let camera = cameras.length>1 ? cameras[1]: cameras[0]
        $('#qr-reader__camera_selection').val(camera)
        $('#qr-reader__dashboard_section_csr > span:nth-child(2) > button').trigger('click')
        
    }
    function requestPermission(){
        $('#qr-reader__dashboard_section_csr >div>button').trigger('click')
        
    }
    function docReady(fn) {
        // see if DOM is already available
        if (document.readyState === "complete"
            || document.readyState === "interactive") {
            // call on next available tick
            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }

    docReady(function () {
        var resultContainer = document.getElementById('qr-reader-results');
        var lastResult, countResults = 0;
        function onScanSuccess(decodedText, decodedResult) {
            if (decodedText !== lastResult) {
                alert(decodedText)
            }
        }

        var html5QrcodeScanner = new Html5QrcodeScanner(
            "qr-reader", { fps: 10, qrbox: 250 });
        html5QrcodeScanner.render(onScanSuccess);
        requestPermission()
    });
</script>

</body>
</html>


